下面给出已改为 **PostgreSQL 语法** 并带有完整 **中文注释** 的建表脚本，直接复制即可在 PostgreSQL 中执行。

```sql
-- ================================================================
-- 1. 标准主表
-- ================================================================
CREATE TABLE standard (
    id                BIGSERIAL PRIMARY KEY,                                    -- 主键ID
    std_code          VARCHAR(64)  NOT NULL UNIQUE,                             -- 标准编号，如 GB/T 14396-2016
    std_name          VARCHAR(512) NOT NULL,                                    -- 标准中文名称
    std_name_en       VARCHAR(512),                                             -- 标准英文名称
    std_type          VARCHAR(32)  NOT NULL CHECK (std_type IN (                -- 标准类型
                          'GB','GB/T','YY','WS','T/CHIA','T/CIIA','T/CEC','T/CAS','T/CMIA','T/CHTA','Others')),
    nature            VARCHAR(16)  NOT NULL CHECK (nature IN (                   -- 标准性质：强制性/推荐性/指导性技术文件
                          'Mandatory','Recommended','Guideline')),
    status            VARCHAR(16)  NOT NULL CHECK (status IN (                   -- 标准状态：现行/废止/被替代
                          'Active','Abolished','Superseded')),
    publish_org       VARCHAR(512),                                               -- 发布机构
    publish_date      DATE,                                                       -- 发布日期
    enforce_date      DATE,                                                       -- 实施日期
    repeal_date       DATE,                                                       -- 废止日期
    ccs               VARCHAR(32),                                                -- 中国标准分类号(CCS)
    ics               VARCHAR(32),                                                -- 国际标准分类号(ICS)
    abstract          TEXT,                                                       -- 标准摘要/适用范围
    contains_patent   BOOLEAN DEFAULT FALSE,                                      -- 是否包含专利信息
    hita_id           VARCHAR(32) UNIQUE,                                         -- HiTA 唯一标识符
    hita_created      TIMESTAMP,                                                  -- HiTA 收录日期
    hita_updated      TIMESTAMP,                                                  -- HiTA 更新日期
    created_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP,                        -- 记录创建时间
    updated_at        TIMESTAMP DEFAULT CURRENT_TIMESTAMP                         -- 记录更新时间
);

COMMENT ON TABLE standard IS '标准主表';

-- ================================================================
-- 2. 标准资源表（PDF、图表、解读、元数据链接等）
-- ================================================================
CREATE TABLE standard_resource (
    id            BIGSERIAL PRIMARY KEY,                                          -- 主键ID
    standard_id   BIGINT NOT NULL REFERENCES standard(id) ON DELETE CASCADE,     -- 所属标准ID
    res_type      VARCHAR(32) NOT NULL CHECK (res_type IN (                       -- 资源类型
                      'PDF','DOC','IMAGE','VIDEO','EXCEL','INTERPRETATION','METADATA_LINK')),
    name          VARCHAR(512) NOT NULL,                                          -- 资源名称
    file_url      VARCHAR(1024),                                                  -- 文件/对象存储URL
    file_size     BIGINT,                                                         -- 文件大小(字节)
    upload_date   DATE,                                                           -- 上传日期
    download_cnt  INTEGER DEFAULT 0,                                              -- 下载次数
    extra         JSONB,                                                          -- 扩展字段（JSON）
    created_at    TIMESTAMP DEFAULT CURRENT_TIMESTAMP                             -- 创建时间
);

COMMENT ON TABLE standard_resource IS '标准附属资源（文件、图表、解读、元数据）';

-- ================================================================
-- 3. 规范性引用文件
-- ================================================================
CREATE TABLE standard_citation (
    id          BIGSERIAL PRIMARY KEY,                                            -- 主键ID
    standard_id BIGINT NOT NULL REFERENCES standard(id) ON DELETE CASCADE,       -- 所属标准ID
    ref_code    VARCHAR(64) NOT NULL,                                             -- 引用标准编号
    ref_name    VARCHAR(512)                                                      -- 引用标准名称
);

COMMENT ON TABLE standard_citation IS '规范性引用文件';

-- ================================================================
-- 4. 标准与外部系统映射关系（HiTA、元数据库、ICD 等）
-- ================================================================
CREATE TABLE standard_mapping (
    id              BIGSERIAL PRIMARY KEY,                                        -- 主键ID
    standard_id     BIGINT NOT NULL REFERENCES standard(id) ON DELETE CASCADE,   -- 所属标准ID
    external_system VARCHAR(64) NOT NULL,                                         -- 外部系统名称（如 HDSB、ICD-10-CM）
    external_key    VARCHAR(128) NOT NULL,                                        -- 外部系统唯一键
    external_name   VARCHAR(512),                                                 -- 外部系统中文名称
    created_at      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,                          -- 创建时间
    UNIQUE (standard_id, external_system, external_key)
);

COMMENT ON TABLE standard_mapping IS '标准与外部系统映射（元数据、ICD、业务系统）';

-- ================================================================
-- 5. 标准历史版本/替代链
-- ================================================================
CREATE TABLE standard_history (
    id           BIGSERIAL PRIMARY KEY,                                           -- 主键ID
    standard_id  BIGINT NOT NULL REFERENCES standard(id) ON DELETE CASCADE,      -- 当前标准ID
    prev_id      BIGINT REFERENCES standard(id),                                 -- 上一版本标准ID
    next_id      BIGINT REFERENCES standard(id),                                 -- 下一版本标准ID
    change_desc  TEXT,                                                           -- 变更说明
    created_at   TIMESTAMP DEFAULT CURRENT_TIMESTAMP                             -- 创建时间
);

COMMENT ON TABLE standard_history IS '标准历史版本与替代链';

-- ================================================================
-- 6. 标签表（关键词、主题词）
-- ================================================================
CREATE TABLE tag (
    id   BIGSERIAL PRIMARY KEY,                                                   -- 主键ID
    name VARCHAR(64) UNIQUE NOT NULL                                             -- 标签名称
);

COMMENT ON TABLE tag IS '标签字典';

-- 7. 标准-标签 多对多关联
CREATE TABLE standard_tag (
    standard_id BIGINT NOT NULL REFERENCES standard(id) ON DELETE CASCADE,      -- 标准ID
    tag_id      BIGINT NOT NULL REFERENCES tag(id)     ON DELETE CASCADE,      -- 标签ID
    PRIMARY KEY (standard_id, tag_id)
);

COMMENT ON TABLE standard_tag IS '标准与标签的多对多关联';

-- ================================================================
-- 7. 常用索引
-- ================================================================
CREATE INDEX idx_std_code          ON standard(std_code);
CREATE INDEX idx_std_type_status   ON standard(std_type, status);
CREATE INDEX idx_std_publish_date  ON standard(publish_date DESC);
CREATE INDEX idx_res_standard      ON standard_resource(standard_id);
CREATE INDEX idx_mapping_system    ON standard_mapping(external_system, external_key);
```

 